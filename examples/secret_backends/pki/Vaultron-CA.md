# Vaultron CA

These are loose steps for assembling a Root and Intermediate CA with Vaultron which are based on the [PKI Secret Backend](https://www.vaultproject.io/docs/secrets/pki/index.html) documentation.

## Root CA

First, define a Root CA:

```
$ vault secrets enable -path=vaultron_root_pki pki
Success! Enabled the pki secrets engine at: 'vaultron_root_pki/'!
```

```
$ vault secrets tune -max-lease-ttl=87600h vaultron_root_pki
Success! Tuned the secrets engine at: vaultron_root_pki/
```

```
$ vault write vaultron_root_pki/root/generate/internal \
common_name=vaultron.waves ttl=87600h
Key             Value
---             -----
certificate     -----BEGIN CERTIFICATE-----
MIIDPjCCAiagAwIBAgIUW3gRJUETZFow6M1viE82D5jX9CQwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMTIzMjIyODQ1WhcN
MjgwMTIxMjIyOTE1WjAZMRcwFQYDVQQDEw52YXVsdHJvbi53YXZlczCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBANJFLMGpZOTRCvwKu2isSI4kEn0FFdjc
wq/500gt2KsxhsPVjUwCW9o+/tx6a61Y10Xa+g6/Lk9iW1ZOZ6VGDxKae4He9Oan
q3w7Zqduxmnx5WSi9tDqeW4cPvfvFGNN5KlXKyVu/SuEL//l/YGMIFuzYikzssRd
QCxPYNoaSa2+JvRYrj3q40I6jYR4b9tk61ssH2J7Dq35wwRmM0BujPlzFTSadfFN
RdMpPr6/En15ucXRhi483IJLDlGyPhjk7ch9AHEWJthvz1U0HyauOxS/e9ksmf9C
7NNsavsFTEETVbLS6XabgqCMs4oBOavtGejDtu/LEqGSTmrXuNIJfPECAwEAAaN+
MHwwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFHgN
PhCttdK2LLtuLeru8M96K6kYMB8GA1UdIwQYMBaAFHgNPhCttdK2LLtuLeru8M96
K6kYMBkGA1UdEQQSMBCCDnZhdWx0cm9uLndhdmVzMA0GCSqGSIb3DQEBCwUAA4IB
AQBadzHcrUsZddcw18tcwpvSpB+S9BbsYRGVP/wXhXP0xNGJzH0hTkriqXrpVQLs
rr7s6xI5hpKYlOQqodkgz44Tztpc5cGBjVRjM30t6XLeUfqn7nojPG5go87lHYpJ
VCQxLEBS4moJ6YL4UYlWMHDVmr8KfTl06rK2Fdr8X3VZifgx6gX0k5tL4PRSBAgU
3pT4VO6+21OD6/y+mdhb0E9RX2//gvD9kaODu8UcBfwCkXqLrRCmmeS6Ow+N0Cp0
3mTgjZBDW+i0VFO1OsP/OacMG1fqY69XULlJ0dlCiW/TG/PnEoR9ikBxAvSF9lkY
+2GNZI95qpYicH4sgGL7BcDm
-----END CERTIFICATE-----
expiration      1832106555
issuing_ca      -----BEGIN CERTIFICATE-----
MIIDPjCCAiagAwIBAgIUW3gRJUETZFow6M1viE82D5jX9CQwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMTIzMjIyODQ1WhcN
MjgwMTIxMjIyOTE1WjAZMRcwFQYDVQQDEw52YXVsdHJvbi53YXZlczCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBANJFLMGpZOTRCvwKu2isSI4kEn0FFdjc
wq/500gt2KsxhsPVjUwCW9o+/tx6a61Y10Xa+g6/Lk9iW1ZOZ6VGDxKae4He9Oan
q3w7Zqduxmnx5WSi9tDqeW4cPvfvFGNN5KlXKyVu/SuEL//l/YGMIFuzYikzssRd
QCxPYNoaSa2+JvRYrj3q40I6jYR4b9tk61ssH2J7Dq35wwRmM0BujPlzFTSadfFN
RdMpPr6/En15ucXRhi483IJLDlGyPhjk7ch9AHEWJthvz1U0HyauOxS/e9ksmf9C
7NNsavsFTEETVbLS6XabgqCMs4oBOavtGejDtu/LEqGSTmrXuNIJfPECAwEAAaN+
MHwwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFHgN
PhCttdK2LLtuLeru8M96K6kYMB8GA1UdIwQYMBaAFHgNPhCttdK2LLtuLeru8M96
K6kYMBkGA1UdEQQSMBCCDnZhdWx0cm9uLndhdmVzMA0GCSqGSIb3DQEBCwUAA4IB
AQBadzHcrUsZddcw18tcwpvSpB+S9BbsYRGVP/wXhXP0xNGJzH0hTkriqXrpVQLs
rr7s6xI5hpKYlOQqodkgz44Tztpc5cGBjVRjM30t6XLeUfqn7nojPG5go87lHYpJ
VCQxLEBS4moJ6YL4UYlWMHDVmr8KfTl06rK2Fdr8X3VZifgx6gX0k5tL4PRSBAgU
3pT4VO6+21OD6/y+mdhb0E9RX2//gvD9kaODu8UcBfwCkXqLrRCmmeS6Ow+N0Cp0
3mTgjZBDW+i0VFO1OsP/OacMG1fqY69XULlJ0dlCiW/TG/PnEoR9ikBxAvSF9lkY
+2GNZI95qpYicH4sgGL7BcDm
-----END CERTIFICATE-----
serial_number   5b:78:11:25:41:13:64:5a:30:e8:cd:6f:88:4f:36:0f:98:d7:f4:24
```

```
$ vault write vaultron_root_pki/config/urls \
issuing_certificates="http://localhost:8200/v1/pki/ca" \
crl_distribution_points="http://localhost:8200/v1/pki/crl"
Success! Data written to: vaultron_root_pki/config/urls
```

```
$ vault write vaultron_root_pki/roles/vaultron-dot-waves \
allowed_domains=vaultron.waves \
allow_subdomains=true max_ttl=14400h
Success! Data written to: vaultron_root_pki/roles/vaultron-dot-waves
```

## Intermediate CA

First enable the intermediate PKI secrets backend mount:

```
$ vault secrets enable -path=vaultron_int_pki pki
Success! Enabled the pki secrets engine at: vaultron_int_pki/
```

Then tune the mountpoint to adjust maximum lease TTL:

```
$ vault secrets tune -max-lease-ttl=14400h vaultron_int_pki
Success! Tuned the secrets engine at: vaultron_int_pki/
```

Now generate the CSR:

```
$ vault write vaultron_int_pki/intermediate/generate/internal \
common_name="vaultron.waves Intermediate Authority" \
ttl=14400h
Key    Value
---    -----
csr    -----BEGIN CERTIFICATE REQUEST-----
MIICuDCCAaACAQAwMDEuMCwGA1UEAxMldmF1bHRyb24ud2F2ZXMgSW50ZXJtZWRp
YXRlIEF1dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANM/
TQ7wVfdJbgVA2MrbxYNmvjwDVwQG/ugDOEIvKyRRyAQNK6OQ/wtanEf34ouupthz
nu/E4jZlsJnNK1DzcaHrWjRznPrtFNfwjTrA6SNSwBUl6rBuQn+I16aZNibUUaEd
KfFNOg3mxtl2nMlavaPrSvZ/3mVhdVKYdVl7kBVyjfUhvKig3qAiyHXWKebPL/ia
k7yd8FoU/XOCXFQlyNEjWjMGyo0TJfAVHYrtxsYalJgF31VqcBeuVAELh0s5A6E/
qcIAawW4AbQR1FPzL+SosPI2lyGcJZIawyPlIIbT6iQ9oCkHyCDXGftXp72Vevvk
Z7IQVVIGlN1YumKmvxMCAwEAAaBDMEEGCSqGSIb3DQEJDjE0MDIwMAYDVR0RBCkw
J4IldmF1bHRyb24ud2F2ZXMgSW50ZXJtZWRpYXRlIEF1dGhvcml0eTANBgkqhkiG
9w0BAQsFAAOCAQEAA1/kNulT3b7BC1lk4ZnQ4O3tIjWRFZSvUYrMiYoBrkzEdSYQ
NgyuJYjzWW0DLvmlvHnr24gOccyrAvFRmvKbUCbCqRtH4VWvbfcYaEUFm2RVEImg
eVDwkpKQFVI0iAdr+h+sZeqvIJKIF4wknYf6GqE6acLGyNZ26PlwdeuyQeIOEvTI
Ul//0LgA/MyrOOOaXO757D14veonz8JnCN3fJcLSxPtsTMV0NXXrclAt/Jm1/cCM
FaUhD4n6IB5pfX6y7w9hsDXeyP2va6vvGXVyUOZvKOJGcexI7VNoy0URJRUAIxgP
7ZhtCM5R/qnWBNQuQbtCFc+5E88uGNzWvs+WHw==
-----END CERTIFICATE REQUEST-----
```

Create the `vaultron.csr` file with the contens of the `csr` field from above:

```
-----BEGIN CERTIFICATE REQUEST-----
MIICuDCCAaACAQAwMDEuMCwGA1UEAxMldmF1bHRyb24ud2F2ZXMgSW50ZXJtZWRp
YXRlIEF1dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANM/
TQ7wVfdJbgVA2MrbxYNmvjwDVwQG/ugDOEIvKyRRyAQNK6OQ/wtanEf34ouupthz
nu/E4jZlsJnNK1DzcaHrWjRznPrtFNfwjTrA6SNSwBUl6rBuQn+I16aZNibUUaEd
KfFNOg3mxtl2nMlavaPrSvZ/3mVhdVKYdVl7kBVyjfUhvKig3qAiyHXWKebPL/ia
k7yd8FoU/XOCXFQlyNEjWjMGyo0TJfAVHYrtxsYalJgF31VqcBeuVAELh0s5A6E/
qcIAawW4AbQR1FPzL+SosPI2lyGcJZIawyPlIIbT6iQ9oCkHyCDXGftXp72Vevvk
Z7IQVVIGlN1YumKmvxMCAwEAAaBDMEEGCSqGSIb3DQEJDjE0MDIwMAYDVR0RBCkw
J4IldmF1bHRyb24ud2F2ZXMgSW50ZXJtZWRpYXRlIEF1dGhvcml0eTANBgkqhkiG
9w0BAQsFAAOCAQEAA1/kNulT3b7BC1lk4ZnQ4O3tIjWRFZSvUYrMiYoBrkzEdSYQ
NgyuJYjzWW0DLvmlvHnr24gOccyrAvFRmvKbUCbCqRtH4VWvbfcYaEUFm2RVEImg
eVDwkpKQFVI0iAdr+h+sZeqvIJKIF4wknYf6GqE6acLGyNZ26PlwdeuyQeIOEvTI
Ul//0LgA/MyrOOOaXO757D14veonz8JnCN3fJcLSxPtsTMV0NXXrclAt/Jm1/cCM
FaUhD4n6IB5pfX6y7w9hsDXeyP2va6vvGXVyUOZvKOJGcexI7VNoy0URJRUAIxgP
7ZhtCM5R/qnWBNQuQbtCFc+5E88uGNzWvs+WHw==
-----END CERTIFICATE REQUEST-----
```

Now use the CSR with the Root CA:

```
$ vault write vaultron_root_pki/root/sign-intermediate \
csr=@vaultron.csr \
format=pem_bundle
Key              Value
---              -----
certificate      -----BEGIN CERTIFICATE-----
MIID4DCCAsigAwIBAgIUQmUzLrcmZ06IQXsEYbIyb+0JHyEwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTgwNDM4WhcN
MTkwOTI0MTgwNTA4WjAwMS4wLAYDVQQDEyV2YXVsdHJvbi53YXZlcyBJbnRlcm1l
ZGlhdGUgQXV0aG9yaXR5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
0z9NDvBV90luBUDYytvFg2a+PANXBAb+6AM4Qi8rJFHIBA0ro5D/C1qcR/fii66m
2HOe78TiNmWwmc0rUPNxoetaNHOc+u0U1/CNOsDpI1LAFSXqsG5Cf4jXppk2JtRR
oR0p8U06DebG2XacyVq9o+tK9n/eZWF1Uph1WXuQFXKN9SG8qKDeoCLIddYp5s8v
+JqTvJ3wWhT9c4JcVCXI0SNaMwbKjRMl8BUdiu3GxhqUmAXfVWpwF65UAQuHSzkD
oT+pwgBrBbgBtBHUU/Mv5Kiw8jaXIZwlkhrDI+UghtPqJD2gKQfIINcZ+1envZV6
++RnshBVUgaU3Vi6Yqa/EwIDAQABo4IBBzCCAQMwDgYDVR0PAQH/BAQDAgEGMA8G
A1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFH8abM5YJjq+PD4ZEMMWNhjvYeCmMB8G
A1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin/CZTMDsGCCsGAQUFBwEBBC8wLTAr
BggrBgEFBQcwAoYfaHR0cDovL2xvY2FsaG9zdDo4MjAwL3YxL3BraS9jYTAwBgNV
HREEKTAngiV2YXVsdHJvbi53YXZlcyBJbnRlcm1lZGlhdGUgQXV0aG9yaXR5MDEG
A1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9sb2NhbGhvc3Q6ODIwMC92MS9wa2kvY3Js
MA0GCSqGSIb3DQEBCwUAA4IBAQCkYPwYPzpUOmuYwIv7Jr4hib+TI0J0udO47Emc
10xXbIjW9JHmHAYuFo0ZXYTpul56hSvxKHFZ/w/Ujxqx2igzDIwWxg3Llg8sZsDF
j5ep50BoUBVlScZ7DNDY/JzVj2wJ0xT7ISavicCMu6WN54rBZMBCWyDs8Y6X5PLo
9SxCQmaXKJ2y5tyS+MM+WjKKbjI9RQz5oQNvf/h+mXUM+EEe5USFFHudKwcGnby5
yB153ZwGU4bwJ75EUJtjcBhRyLw038LAehe9JJv9FLCqs9PkbYrBHKyKxMwMeFCP
NX0TTOz6Bwa3Wg3/Mvx99YW0lfx/af9SlKCIiZ+vM792zavE
-----END CERTIFICATE-----
expiration       1569348308
issuing_ca       -----BEGIN CERTIFICATE-----
MIIDPjCCAiagAwIBAgIUHU0eP7p0i68vKkJQGJGuGY6ELZgwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTc1NjQ2WhcN
MjgwMTMwMTc1NzE1WjAZMRcwFQYDVQQDEw52YXVsdHJvbi53YXZlczCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMu0uEQcR3xiYaGC+0ZC0STV2MKJji76
OS82+I/zi8asmPaBXU8VOclsxCpACJkB8ORq8er95T3snB2KAmuSt97qJBSIWvih
HS9jT6L/QnHy5xz1jQ4iNHXFd3Gq19g0cr3CULEMSRO4xTZ6XzAVTZA6aKhALJ8a
Jlog+TbiDH6GghpQRtqGyDtpMTpVz8WpgIchkko1Fch4D/Ou7AkvCGjwu+fvZcBp
Gsk8MAP6ZXESusmfnlZkAklnAu3TpV/QohmakvKHOKZZ7slQO2FEkqBjPm62QEKL
3ZPQD2cPKOAnjSpP6rByEiDrv32dDC8Y+MtaGiL3H0zUjQsZhfPTh3sCAwEAAaN+
MHwwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFMyl
wRNZt26GiszjaaSL+Fin/CZTMB8GA1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin
/CZTMBkGA1UdEQQSMBCCDnZhdWx0cm9uLndhdmVzMA0GCSqGSIb3DQEBCwUAA4IB
AQAeNVo3LB4COLcBKebjuieEfrcfQU7X3S2F/Ur9EgTl7vmw0uvoh6NTVvs0RYLT
69vkoj/tPM9/Qx9ieNIHSMCxVIL9m1mxmmKWRwU4i8Vg4NnYI0VytPYtL2BfsvtX
B50xERJ7RMvc8QeESNhnnJ9tCaASgR10Yz8IoMf05ZZIaiJxnV4XQAqv9fhq2Ncl
f6qLPr4pNtkysHy5uACLLyBiLSQCoX7pGUkET7p05FQfPf+61lm8GGoDVv8RytH6
8TbQRX5M5Vclugv6x+84XgAHFXxzdrjhAPqlzFkpYrJMM5f1fKjITIMgoHLVVPyj
QNcOzUJ56k1y2laIvLSOHmAp
-----END CERTIFICATE-----
serial_number    42:65:33:2e:b7:26:67:4e:88:41:7b:04:61:b2:32:6f:ed:09:1f:21
```

Create an Intermediate CA `signed_certificate.pem` file:

```
-----BEGIN CERTIFICATE-----
MIID4DCCAsigAwIBAgIUQmUzLrcmZ06IQXsEYbIyb+0JHyEwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTgwNDM4WhcN
MTkwOTI0MTgwNTA4WjAwMS4wLAYDVQQDEyV2YXVsdHJvbi53YXZlcyBJbnRlcm1l
ZGlhdGUgQXV0aG9yaXR5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
0z9NDvBV90luBUDYytvFg2a+PANXBAb+6AM4Qi8rJFHIBA0ro5D/C1qcR/fii66m
2HOe78TiNmWwmc0rUPNxoetaNHOc+u0U1/CNOsDpI1LAFSXqsG5Cf4jXppk2JtRR
oR0p8U06DebG2XacyVq9o+tK9n/eZWF1Uph1WXuQFXKN9SG8qKDeoCLIddYp5s8v
+JqTvJ3wWhT9c4JcVCXI0SNaMwbKjRMl8BUdiu3GxhqUmAXfVWpwF65UAQuHSzkD
oT+pwgBrBbgBtBHUU/Mv5Kiw8jaXIZwlkhrDI+UghtPqJD2gKQfIINcZ+1envZV6
++RnshBVUgaU3Vi6Yqa/EwIDAQABo4IBBzCCAQMwDgYDVR0PAQH/BAQDAgEGMA8G
A1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFH8abM5YJjq+PD4ZEMMWNhjvYeCmMB8G
A1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin/CZTMDsGCCsGAQUFBwEBBC8wLTAr
BggrBgEFBQcwAoYfaHR0cDovL2xvY2FsaG9zdDo4MjAwL3YxL3BraS9jYTAwBgNV
HREEKTAngiV2YXVsdHJvbi53YXZlcyBJbnRlcm1lZGlhdGUgQXV0aG9yaXR5MDEG
A1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9sb2NhbGhvc3Q6ODIwMC92MS9wa2kvY3Js
MA0GCSqGSIb3DQEBCwUAA4IBAQCkYPwYPzpUOmuYwIv7Jr4hib+TI0J0udO47Emc
10xXbIjW9JHmHAYuFo0ZXYTpul56hSvxKHFZ/w/Ujxqx2igzDIwWxg3Llg8sZsDF
j5ep50BoUBVlScZ7DNDY/JzVj2wJ0xT7ISavicCMu6WN54rBZMBCWyDs8Y6X5PLo
9SxCQmaXKJ2y5tyS+MM+WjKKbjI9RQz5oQNvf/h+mXUM+EEe5USFFHudKwcGnby5
yB153ZwGU4bwJ75EUJtjcBhRyLw038LAehe9JJv9FLCqs9PkbYrBHKyKxMwMeFCP
NX0TTOz6Bwa3Wg3/Mvx99YW0lfx/af9SlKCIiZ+vM792zavE
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIDPjCCAiagAwIBAgIUHU0eP7p0i68vKkJQGJGuGY6ELZgwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTc1NjQ2WhcN
MjgwMTMwMTc1NzE1WjAZMRcwFQYDVQQDEw52YXVsdHJvbi53YXZlczCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMu0uEQcR3xiYaGC+0ZC0STV2MKJji76
OS82+I/zi8asmPaBXU8VOclsxCpACJkB8ORq8er95T3snB2KAmuSt97qJBSIWvih
HS9jT6L/QnHy5xz1jQ4iNHXFd3Gq19g0cr3CULEMSRO4xTZ6XzAVTZA6aKhALJ8a
Jlog+TbiDH6GghpQRtqGyDtpMTpVz8WpgIchkko1Fch4D/Ou7AkvCGjwu+fvZcBp
Gsk8MAP6ZXESusmfnlZkAklnAu3TpV/QohmakvKHOKZZ7slQO2FEkqBjPm62QEKL
3ZPQD2cPKOAnjSpP6rByEiDrv32dDC8Y+MtaGiL3H0zUjQsZhfPTh3sCAwEAAaN+
MHwwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFMyl
wRNZt26GiszjaaSL+Fin/CZTMB8GA1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin
/CZTMBkGA1UdEQQSMBCCDnZhdWx0cm9uLndhdmVzMA0GCSqGSIb3DQEBCwUAA4IB
AQAeNVo3LB4COLcBKebjuieEfrcfQU7X3S2F/Ur9EgTl7vmw0uvoh6NTVvs0RYLT
69vkoj/tPM9/Qx9ieNIHSMCxVIL9m1mxmmKWRwU4i8Vg4NnYI0VytPYtL2BfsvtX
B50xERJ7RMvc8QeESNhnnJ9tCaASgR10Yz8IoMf05ZZIaiJxnV4XQAqv9fhq2Ncl
f6qLPr4pNtkysHy5uACLLyBiLSQCoX7pGUkET7p05FQfPf+61lm8GGoDVv8RytH6
8TbQRX5M5Vclugv6x+84XgAHFXxzdrjhAPqlzFkpYrJMM5f1fKjITIMgoHLVVPyj
QNcOzUJ56k1y2laIvLSOHmAp
-----END CERTIFICATE-----
```

Set up the Root CA signed certificate:

```
$ vault write vaultron_int_pki/intermediate/set-signed \
certificate=@signed_certificate.pem
Success! Data written to: vaultron_int_pki/intermediate/set-signed
```

Define the CA and CRL endpoints:

```
$ vault write vaultron_int_pki/config/urls \
issuing_certificates="http://127.0.0.1:8200/v1/vaultron_int_pki/ca" \
crl_distribution_points="http://127.0.0.1:8200/v1/vaultron_int_pki/crl"
Success! Data written to: vaultron_int_pki/config/urls
```

Create a role:

```
$ vault write vaultron_int_pki/roles/vaultron-dot-waves \
allowed_domains=vaultron.waves \
allow_subdomains=true max_ttl=14400
Success! Data written to: vaultron_int_pki/roles/vaultron-dot-waves
```

Generate a server only certificate:

```
$ vault write vaultron_int_pki/issue/vaultron-dot-waves \
common_name=tacotown.vaultron.waves \
client_flag=false
Key                 Value
---                 -----
ca_chain            [-----BEGIN CERTIFICATE-----
MIID4DCCAsigAwIBAgIUQmUzLrcmZ06IQXsEYbIyb+0JHyEwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTgwNDM4WhcN
MTkwOTI0MTgwNTA4WjAwMS4wLAYDVQQDEyV2YXVsdHJvbi53YXZlcyBJbnRlcm1l
ZGlhdGUgQXV0aG9yaXR5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
0z9NDvBV90luBUDYytvFg2a+PANXBAb+6AM4Qi8rJFHIBA0ro5D/C1qcR/fii66m
2HOe78TiNmWwmc0rUPNxoetaNHOc+u0U1/CNOsDpI1LAFSXqsG5Cf4jXppk2JtRR
oR0p8U06DebG2XacyVq9o+tK9n/eZWF1Uph1WXuQFXKN9SG8qKDeoCLIddYp5s8v
+JqTvJ3wWhT9c4JcVCXI0SNaMwbKjRMl8BUdiu3GxhqUmAXfVWpwF65UAQuHSzkD
oT+pwgBrBbgBtBHUU/Mv5Kiw8jaXIZwlkhrDI+UghtPqJD2gKQfIINcZ+1envZV6
++RnshBVUgaU3Vi6Yqa/EwIDAQABo4IBBzCCAQMwDgYDVR0PAQH/BAQDAgEGMA8G
A1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFH8abM5YJjq+PD4ZEMMWNhjvYeCmMB8G
A1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin/CZTMDsGCCsGAQUFBwEBBC8wLTAr
BggrBgEFBQcwAoYfaHR0cDovL2xvY2FsaG9zdDo4MjAwL3YxL3BraS9jYTAwBgNV
HREEKTAngiV2YXVsdHJvbi53YXZlcyBJbnRlcm1lZGlhdGUgQXV0aG9yaXR5MDEG
A1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9sb2NhbGhvc3Q6ODIwMC92MS9wa2kvY3Js
MA0GCSqGSIb3DQEBCwUAA4IBAQCkYPwYPzpUOmuYwIv7Jr4hib+TI0J0udO47Emc
10xXbIjW9JHmHAYuFo0ZXYTpul56hSvxKHFZ/w/Ujxqx2igzDIwWxg3Llg8sZsDF
j5ep50BoUBVlScZ7DNDY/JzVj2wJ0xT7ISavicCMu6WN54rBZMBCWyDs8Y6X5PLo
9SxCQmaXKJ2y5tyS+MM+WjKKbjI9RQz5oQNvf/h+mXUM+EEe5USFFHudKwcGnby5
yB153ZwGU4bwJ75EUJtjcBhRyLw038LAehe9JJv9FLCqs9PkbYrBHKyKxMwMeFCP
NX0TTOz6Bwa3Wg3/Mvx99YW0lfx/af9SlKCIiZ+vM792zavE
-----END CERTIFICATE----- -----BEGIN CERTIFICATE-----
MIIDPjCCAiagAwIBAgIUHU0eP7p0i68vKkJQGJGuGY6ELZgwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTc1NjQ2WhcN
MjgwMTMwMTc1NzE1WjAZMRcwFQYDVQQDEw52YXVsdHJvbi53YXZlczCCASIwDQYJ
KoZIhvcNAQEBBQADggEPADCCAQoCggEBAMu0uEQcR3xiYaGC+0ZC0STV2MKJji76
OS82+I/zi8asmPaBXU8VOclsxCpACJkB8ORq8er95T3snB2KAmuSt97qJBSIWvih
HS9jT6L/QnHy5xz1jQ4iNHXFd3Gq19g0cr3CULEMSRO4xTZ6XzAVTZA6aKhALJ8a
Jlog+TbiDH6GghpQRtqGyDtpMTpVz8WpgIchkko1Fch4D/Ou7AkvCGjwu+fvZcBp
Gsk8MAP6ZXESusmfnlZkAklnAu3TpV/QohmakvKHOKZZ7slQO2FEkqBjPm62QEKL
3ZPQD2cPKOAnjSpP6rByEiDrv32dDC8Y+MtaGiL3H0zUjQsZhfPTh3sCAwEAAaN+
MHwwDgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFMyl
wRNZt26GiszjaaSL+Fin/CZTMB8GA1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin
/CZTMBkGA1UdEQQSMBCCDnZhdWx0cm9uLndhdmVzMA0GCSqGSIb3DQEBCwUAA4IB
AQAeNVo3LB4COLcBKebjuieEfrcfQU7X3S2F/Ur9EgTl7vmw0uvoh6NTVvs0RYLT
69vkoj/tPM9/Qx9ieNIHSMCxVIL9m1mxmmKWRwU4i8Vg4NnYI0VytPYtL2BfsvtX
B50xERJ7RMvc8QeESNhnnJ9tCaASgR10Yz8IoMf05ZZIaiJxnV4XQAqv9fhq2Ncl
f6qLPr4pNtkysHy5uACLLyBiLSQCoX7pGUkET7p05FQfPf+61lm8GGoDVv8RytH6
8TbQRX5M5Vclugv6x+84XgAHFXxzdrjhAPqlzFkpYrJMM5f1fKjITIMgoHLVVPyj
QNcOzUJ56k1y2laIvLSOHmAp
-----END CERTIFICATE-----]
certificate         -----BEGIN CERTIFICATE-----
MIIEAzCCAuugAwIBAgIUaMT4wFraGGf7gREKIcBFb+ZtEIwwDQYJKoZIhvcNAQEL
BQAwMDEuMCwGA1UEAxMldmF1bHRyb24ud2F2ZXMgSW50ZXJtZWRpYXRlIEF1dGhv
cml0eTAeFw0xODAyMDExODA4MzVaFw0xODAyMDEyMjA5MDVaMCIxIDAeBgNVBAMT
F3RhY290b3duLnZhdWx0cm9uLndhdmVzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A
MIIBCgKCAQEAmMtEQLYWJBvF3l3c+0mq4fezvT1/8UljEaBjySMDL3cZiyHoYhDx
KtmLW5PybM1mFoWzPgJdh8UIJSZvl1jC24R/KMMPDzRaMDrrrf3AviL/CWseJas1
SeTDINDwC95VpYjcfkNVWgKqrUxR8YWB31zumY/jKXrQQh6zpkdV5EVMNV51mu8w
+321ayXsro+F7r/nKRlQRh1cA7PjMUIw9oauOe+vHOKGopTuRoxOettO4FPF5UqL
NJQZEuHv9OhlighDMRY/XeFo2glWPgzjLBYK1tk6boUX7Mk443eL9rOICEYYQmOr
vk56fE7Rvdzsg5IMJq6JFE7uTVjk0ZSjiwIDAQABo4IBITCCAR0wDgYDVR0PAQH/
BAQDAgOoMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNVHQ4EFgQU
3rW0TnI76UoKOf7E+RuW8UmWHDYwHwYDVR0jBBgwFoAUfxpszlgmOr48PhkQwxY2
GO9h4KYwSAYIKwYBBQUHAQEEPDA6MDgGCCsGAQUFBzAChixodHRwOi8vMTI3LjAu
MC4xOjgyMDAvdjEvdmF1bHRyb25faW50X3BraS9jYTAiBgNVHREEGzAZghd0YWNv
dG93bi52YXVsdHJvbi53YXZlczA+BgNVHR8ENzA1MDOgMaAvhi1odHRwOi8vMTI3
LjAuMC4xOjgyMDAvdjEvdmF1bHRyb25faW50X3BraS9jcmwwDQYJKoZIhvcNAQEL
BQADggEBAIUUzQW+PfAG/2iClfq7roNaAQcVbsK/6YNfefA2y/h28mJDgNAfsqhN
w6fuT55HFyfZ1toYvru9UmW74M1oZEGtNUHOdHeopgd5xgKK+QhLTbPXRUMN3aG5
RbpxOd+BweMCgWktRi+xPv5J7dnEnlq2bG8C7qVNIy5bpTLPknz5/PafxbfLeBfb
/9wzU91kqVHHSwkVcEcSVPphR9X2eaGOngyGGk1IYMAMoskx6Yrmpvib6ZR9c58Q
Uyo250LGttrizdlfUuomZdsArz5hCcQiaFZga9ct3M8/k83lsJyDlzqPG/onKxGX
E5ysGpmZhANyhBlg1RRR3/FONiRLlxc=
-----END CERTIFICATE-----
issuing_ca          -----BEGIN CERTIFICATE-----
MIID4DCCAsigAwIBAgIUQmUzLrcmZ06IQXsEYbIyb+0JHyEwDQYJKoZIhvcNAQEL
BQAwGTEXMBUGA1UEAxMOdmF1bHRyb24ud2F2ZXMwHhcNMTgwMjAxMTgwNDM4WhcN
MTkwOTI0MTgwNTA4WjAwMS4wLAYDVQQDEyV2YXVsdHJvbi53YXZlcyBJbnRlcm1l
ZGlhdGUgQXV0aG9yaXR5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA
0z9NDvBV90luBUDYytvFg2a+PANXBAb+6AM4Qi8rJFHIBA0ro5D/C1qcR/fii66m
2HOe78TiNmWwmc0rUPNxoetaNHOc+u0U1/CNOsDpI1LAFSXqsG5Cf4jXppk2JtRR
oR0p8U06DebG2XacyVq9o+tK9n/eZWF1Uph1WXuQFXKN9SG8qKDeoCLIddYp5s8v
+JqTvJ3wWhT9c4JcVCXI0SNaMwbKjRMl8BUdiu3GxhqUmAXfVWpwF65UAQuHSzkD
oT+pwgBrBbgBtBHUU/Mv5Kiw8jaXIZwlkhrDI+UghtPqJD2gKQfIINcZ+1envZV6
++RnshBVUgaU3Vi6Yqa/EwIDAQABo4IBBzCCAQMwDgYDVR0PAQH/BAQDAgEGMA8G
A1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFH8abM5YJjq+PD4ZEMMWNhjvYeCmMB8G
A1UdIwQYMBaAFMylwRNZt26GiszjaaSL+Fin/CZTMDsGCCsGAQUFBwEBBC8wLTAr
BggrBgEFBQcwAoYfaHR0cDovL2xvY2FsaG9zdDo4MjAwL3YxL3BraS9jYTAwBgNV
HREEKTAngiV2YXVsdHJvbi53YXZlcyBJbnRlcm1lZGlhdGUgQXV0aG9yaXR5MDEG
A1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9sb2NhbGhvc3Q6ODIwMC92MS9wa2kvY3Js
MA0GCSqGSIb3DQEBCwUAA4IBAQCkYPwYPzpUOmuYwIv7Jr4hib+TI0J0udO47Emc
10xXbIjW9JHmHAYuFo0ZXYTpul56hSvxKHFZ/w/Ujxqx2igzDIwWxg3Llg8sZsDF
j5ep50BoUBVlScZ7DNDY/JzVj2wJ0xT7ISavicCMu6WN54rBZMBCWyDs8Y6X5PLo
9SxCQmaXKJ2y5tyS+MM+WjKKbjI9RQz5oQNvf/h+mXUM+EEe5USFFHudKwcGnby5
yB153ZwGU4bwJ75EUJtjcBhRyLw038LAehe9JJv9FLCqs9PkbYrBHKyKxMwMeFCP
NX0TTOz6Bwa3Wg3/Mvx99YW0lfx/af9SlKCIiZ+vM792zavE
-----END CERTIFICATE-----
private_key         -----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAmMtEQLYWJBvF3l3c+0mq4fezvT1/8UljEaBjySMDL3cZiyHo
YhDxKtmLW5PybM1mFoWzPgJdh8UIJSZvl1jC24R/KMMPDzRaMDrrrf3AviL/CWse
Jas1SeTDINDwC95VpYjcfkNVWgKqrUxR8YWB31zumY/jKXrQQh6zpkdV5EVMNV51
mu8w+321ayXsro+F7r/nKRlQRh1cA7PjMUIw9oauOe+vHOKGopTuRoxOettO4FPF
5UqLNJQZEuHv9OhlighDMRY/XeFo2glWPgzjLBYK1tk6boUX7Mk443eL9rOICEYY
QmOrvk56fE7Rvdzsg5IMJq6JFE7uTVjk0ZSjiwIDAQABAoIBAD1QXFxHdY0Z5AY+
zl28iylQmD0Zf80YsPuyzDg7p5yVg5eUjMdFmzGhyM2ACillJ1FkZ7A7jMLd603V
JbSrNs6WVdzKobFtRb/S9R6GFKF4M7XY2WkuUh0MAs2Zaqqolt/tkuXMKWUMaudO
GBf+hkZW6ZyP5A2SLh5KabcRK0OFeLfk7+wcj6Of2opremI+c+euPocEmE6+wt3B
AAty4CUo0iPinS7t8ew2JCdXk4DIc5bKx+MdXXEdx8RUQmhyfEF1cyk1hbIqS5Kz
73E8uR1dpk7uZSq8HX0viC4CeqheRNMk8hrBHmf4lFAfvUtplxS/yHKU4BZftxfj
MgGT2SECgYEAwz8uEhYcf+hX10nUACEotp3gD3pXKDcv1jpICgPfrBhQXD4+aEDO
NwBxFpRMfJtdd5UPYB1Dst9R39Ha9Xch4yInsh8j/Dh9864moTb2NKuAtdxT/Z66
IpfE+uxVSP96vPMvccxPdikogZlPUVo5iJBmVbFw6ORBQOKMZjWRtHECgYEAyFZq
QCxnCKRWruMque1r478pWm4VSJE4NQ5UwENYkxleCGyzBz3Hxbyswqpqd4a8SEbQ
prWlZnKk5AepziApncTo8Rn17tnP6zfdClirXkgjDjSKC5ghPX0miDjuQUOCcz8f
fwfnrHmyr+wFanTg716jRDG7F9uP+ZnZ5kzppbsCgYA94jST/vYhhF7zGa9cKyZg
W0G9JiWh1XwQBoD2y6uFPF+cHQ5itMennzg40+A6TnQdht1MtXnTo/yrWDRyQMQ4
3YZ/amdZdf5V0gjkaCs5HnK5MZBdfoW4mSoR7f5KGM+qO9n506wL45e3HASL4HED
2+DToF4NMuuLyUJ+0tPPwQKBgBsRigOnvDgvtEKnEQPUL4qzLow4aYnHjVel2w+r
SdF+UPVEcqAc2dw+1Pzsd7w0qUX+w3xy+Kkx/lONMYVXVSgrDepdvpwKNAytHKGk
P2taxdnKgYh1grBDM6yePJr22y5lLgVE9SmZu+oHMugiaK4PFHJHYeckVHy+K/Hx
HHS3AoGBAIvzBYD3sdAfnW9tE6kYXisblzprW3n2zsqMSzBFTav2k9R7Jk6tuOIC
z6AirMFVFe8OZ9P6YXIVuHxzIwAX7ouhAB01d8tFaigP8I7VEtZl62BFEZ7bdL48
36P29aIOL4d5Dcp9nHgSE9CYVfbrqA0h0y4ulV+hSDLkQJlnAgxj
-----END RSA PRIVATE KEY-----
private_key_type    rsa
serial_number       68:c4:f8:c0:5a:da:18:67:fb:81:11:0a:21:c0:45:6f:e6:6d:10:8c
```
